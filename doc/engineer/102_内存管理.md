# 内存管理和分别相关topic






## 内存分配



mmap 文件映射到内存
mmap是把文件内容映射到进程的虚拟内存空间, 通过对这段内存的读取和修改，来实现对文件的读取和修改,而不需要再调用read，write等操作
为什么用mmap
1. 用mmap替代文件操作(read,write)访问设备，效率高. 它是用户空间访问内核空间的一种高效率方式。
mmap – 映射文件到虚拟内存
read,write – copy_to_user 拷贝
对比read write，mmap无需每次都copy_to_user拷贝一次. 它仅需一次映射，以后都直接操作内存buf,效率高。
2. 用共享内存方式，方便进程间通讯，且效率高。
采用共享内存通信的一个显而易见的好处是效率高，因为进程可以直接读写内存，而不需要任何数据的拷贝。
对于像管道和消息队列等通信方式，则需要在内核和用户空间进行四次的数据拷贝，
而共享内存则只拷贝两次数据：一次从输入文件到共享内存区，另一次从共享内存区到输出文件


参考：https://blog.csdn.net/qq_43814197/article/details/116461214















