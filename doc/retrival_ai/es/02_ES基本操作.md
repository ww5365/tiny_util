[TOC]

# ES相关知识总结

## ES基本命令



* 查看索引的setting和mapping
GET https://10.33.236.11:9210/suggest_geo_guonei
GET https://10.33.236.11:9210/suggest_geo_guonei/_mapping

* 查看索引所有的索引
GET https://10.33.236.11:9210/_cat/indices? 

* 查看索引中全部数据：
GET https://10.33.236.11:9210/suggest_test_3/_search

* 查看分词器的分词效果

GET https://10.33.236.11:9210/suggest_geo_guonei/_analyze

``` json
{
    "analyzer":"text_prefix_analyzer",  # 使用这个分词器
    "text": "xunleibujiyaer"  # 对这段文件进行分词
}
```

分词器的设置：
``` json
    "analysis": {
      "analyzer": {
        "text_prefix_analyzer": {
          "type": "custom",
          "tokenizer": "text_edge_ngram_tokenizer",
          "filter": [
            "lowercase",
            "asciifolding",
            "arabic_normalization"
          ]
        }
      },
      "tokenizer": {
        "text_edge_ngram_tokenizer": {
          "type": "edge_ngram",
          "min_gram": 1,
          "max_gram": 256,
          "token_chars": [
            "letter",
            "digit"
          ]
        }
      }
    },

```

* 查看DSL的打分情况 -- explain


``` json
{
  "query"（query）: { 
    "bool"（复合语句）: { 
      "must"（复合语句参数）: [
        { "match"（子查询）: { "title":   "Search"        }},
        { "match"（子查询）: { "content": "Elasticsearch" }}
      ],
      "filter"（复合语句参数）: [ 
        { "term"（子查询）:  { "status": "published" }},
        { "range"（子查询）: { "publish_date": { "gte": "2015-01-01" }}}
      ]
    }
  },
  "explain":true
}

```






* 创建文档
POST http://127.0.0.1:9200/{索引名}/_doc

POST https://10.33.236.11:9210/suggest_test_3/_doc



